{% extends 'base.html' %}
{% load staticfiles %}
{% block content %}
<h2>{{ dd }}</h2>


{% endblock content %}

{% load render_bundle from webpack_loader %}

{% block main %}
     {#    Подключение channels#}
    <script src="{% static '/channels/js/websocketbridge.js' %}" type="text/javascript"></script>
    <script>

         var text = "eeee"
        const webSocketBridge = new channels.WebSocketBridge();
        const webSocketBridgeStart = new channels.WebSocketBridge();

        document.addEventListener('DOMContentLoaded', function() {
          webSocketBridge.connect('/trainsFirstConnectToGame/');
          webSocketBridge.listen(function(action, stream) {
            console.log("RESPONSE:", action, stream);
          })
            {#сразу конектимся#}
          {#webSocketBridge.send("hi")#}

          webSocketBridgeStart.connect('/startGameConsumer/');
          webSocketBridgeStart.listen(function(action, stream) {
             console.log("RESPONSE_notifications:", action);
          });


        })

         function startGame(textIn) {
            text = textIn + 1;
           webSocketBridgeStart.send(text)
        }
    </script>

    <button onclick="startGame(text)">startGame</button>

{% render_bundle 'vendors' %}
{% render_bundle 'Pixi' %}



{% endblock main %}